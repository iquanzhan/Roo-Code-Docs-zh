---
description: 了解如何在 Roo Code 中创建和使用自定义斜杠命令，通过基于 Markdown 的定义来自动化工作流程和扩展功能。
keywords:
  - 斜杠命令
  - 自定义命令
  - Roo Code 命令
  - 命令自动化
  - 工作流程自动化
  - Markdown 命令
  - .roo/commands
image: /img/social-share.jpg
---

# 斜杠命令

创建自定义斜杠命令，通过简单的 Markdown 文件自动化重复性任务并扩展 Roo Code 的功能。

:::tip 快速开始
在聊天中输入 `/` 查看所有可用命令，或通过将 Markdown 文件添加到 `.roo/commands/` 或 `~/.roo/commands/` 来创建您自己的命令！
:::

---

## 概述

斜杠命令允许您创建可重复使用的提示和工作流程，可以即时触发。将复杂的多步骤过程转换为单个命令，标准化团队实践，并通过简单的 Markdown 文件自动化重复性任务。

<img src="/img/slash-commands/slash-commands.png" alt="显示可用命令的斜杠命令菜单" width="400" />

**主要优势：**
- **工作流程自动化**：将复杂的多步骤过程转换为单个命令
- **团队标准化**：在团队中共享命令以实现一致的实践
- **上下文保留**：在每个命令中包含项目特定的上下文
- **快速访问**：模糊搜索和自动完成以实现即时命令发现

---

## 创建自定义命令

自定义命令通过将 Markdown 文件添加到特定目录来扩展 Roo Code 的功能：

- **项目特定**：工作区根目录中的 `.roo/commands/`
- **全局**：主目录中的 `~/.roo/commands/`

文件名将成为命令名。例如：
- `review.md` → `/review`
- `test-api.md` → `/test-api`
- `deploy-check.md` → `/deploy-check`

:::info 命令名称处理
通过 UI 创建命令时，命令名称会自动处理：
- 转换为小写
- 空格替换为破折号
- 删除特殊字符
- 删除前导/尾随破折号

示例："My Cool Command!" 变为 `my-cool-command`
:::

**基本命令格式**

通过添加 Markdown 文件创建简单命令：

```markdown
# review.md
请审查此代码的以下方面：
- 性能问题
- 安全漏洞
- 代码风格违规
- 潜在错误
```

**带前置元数据的高级命令**

使用前置元数据添加元数据以增强功能：

```yaml
---
description: 全面的代码审查，重点关注安全性和性能
argument-hint: <要审查的文件或目录>
---

# 安全优先的代码审查

请对所选代码进行彻底的安全审查：

1. **身份验证和授权**
   - 检查适当的访问控制
   - 验证令牌验证
   - 审查权限检查

2. **输入验证**
   - 识别潜在的注入点
   - 检查适当的清理
   - 审查数据类型验证

3. **安全最佳实践**
   - 查找硬编码的机密
   - 检查安全通信
   - 审查错误处理以防止信息泄露
```

**前置元数据字段：**
- **`description`**：出现在命令菜单中，帮助用户理解命令的用途
- **`argument-hint`**：（可选）在使用命令时提供关于预期参数的提示。有关详细信息，请参见 [参数提示](#argument-hints)

---

## 命令管理 UI

Roo Code 提供了专用的 UI 来管理自定义命令。

<img src="/img/slash-commands/slash-commands-4.png" alt="从 Roo Code 面板访问命令管理器" width="600" />

*单击 Roo Code 面板中的命令图标以打开命令管理器*

**创建新命令：**

1. 在输入字段中键入您的命令名称（例如，"Sample command name"）
2. 单击 `+` 按钮创建命令

<img src="/img/slash-commands/slash-commands-1.png" alt="自定义命令管理界面" width="400" />


3. 将自动创建并打开一个新文件（例如，`sample-command-name.md`）

<img src="/img/slash-commands/slash-commands-2.png" alt="通过键入名称并单击加号按钮创建新命令" width="600" />


---

## 使用斜杠命令

在聊天中输入 `/` 以查看包含两种类型命令的统一菜单。该菜单在同一界面中显示自定义工作流程命令和模式切换命令。

<img src="/img/slash-commands/slash-commands-3.png" alt="在编辑器中打开新创建的命令文件" width="600" />


1. **统一菜单**：自定义命令和模式切换命令一起显示
2. **自动完成**：开始键入以筛选命令（例如，`/sam` 显示 `sample-command-name`）
3. **模糊搜索**：即使部分匹配也能找到命令
4. **描述预览**：在菜单中查看命令描述
5. **视觉指示器**：模式命令通过特殊图标与自定义命令区分开来

---

## 参数提示

参数提示为斜杠命令提供即时帮助，显示命令期望额外输入时应提供哪种信息。

当您输入 `/` 以调出命令菜单时，期望参数的命令将在其旁边显示浅灰色提示。此提示告诉您命令期望哪种参数。

例如：
- `/mode <mode_slug>` - 提示 `<mode_slug>` 表明您应提供模式名称，如 `code` 或 `debug`
- `/api-endpoint <endpoint-name> <http-method>` - 显示您需要端点名称和 HTTP 方法

选择命令后，它将被插入到聊天输入中，后跟一个空格。提示不会被插入；它只是一个视觉指南，帮助您知道接下来要键入什么。然后您必须在命令后手动键入参数。

**向自定义命令添加参数提示**

您可以使用前置元数据中的 `argument-hint` 字段向自定义命令添加参数提示：

```yaml
---
description: 使用最佳实践生成新的 REST API 端点
argument-hint: <端点名称> <http 方法>
---
```

这将在命令菜单中显示为 `/api-endpoint <端点名称> <http 方法>`。

**参数提示的最佳实践：**
- **具体化**：使用描述性占位符，如 `<file-path>` 而不是通用的 `<arg>`
- **显示多个参数**：如果您的命令需要多个输入，请全部显示：`<source> <destination>`
- **使用一致的格式**：始终用尖括号包装占位符：`<placeholder>`
- **保持简洁**：提示应简短明了

**常见问题：**

- **"如果我不提供参数会怎样？"** 命令可能无法按预期工作，或者可能会提示您提供更多信息。提示是为了帮助您第一次就做对。
- **"所有命令都有提示吗？"** 不，只有设计为接受参数的命令才会有提示。无需额外输入即可工作的命令不会显示提示。
- **"我可以不替换提示就使用命令吗？"** 提示文本（如 `<mode_slug>`）需要用实际值替换。保留提示文本可能会导致命令失败或行为异常。

---

## 示例和用例

**开发工作流程**

**API 端点生成器**
```yaml
---
description: 使用最佳实践生成新的 REST API 端点
argument-hint: <端点名称> <http 方法>
---

创建具有以下规范的新 REST API 端点：
- 适当的错误处理
- 输入验证
- 身份验证中间件
- OpenAPI 文档
- 单元测试
- 集成测试

遵循我们项目的 API 约定和模式。
```

**数据库迁移助手**
```yaml
---
description: 创建具有回滚支持的数据库迁移
---

生成数据库迁移：
1. 包括向上和向下迁移
2. 具有适当的事务处理
3. 包括数据验证
4. 提供清晰的迁移描述
5. 遵循我们的命名约定

记得检查依赖的迁移和数据完整性。
```

**代码质量**

**性能分析器**
```yaml
---
description: 分析代码中的性能瓶颈
---

分析所选代码中的性能问题：
- 识别 O(n²) 或更差的算法
- 查找不必要的数据库查询
- 检测内存泄漏
- 建议缓存机会
- 推荐 async/await 优化
- 检查适当的资源清理
```

**重构助手**
```yaml
---
description: 建议重构改进以获得更清晰的代码
---

审查此代码并建议重构改进：
- 将重复代码提取到函数中
- 改进变量和函数名称
- 简化复杂条件
- 应用 SOLID 原则
- 减少组件之间的耦合
- 提高可测试性
```

**文档**

**README 生成器**
```yaml
---
description: 为当前项目创建全面的 README
---

生成一个包含以下内容的 README.md 文件：
1. 项目标题和描述
2. 安装说明
3. 使用示例
4. API 文档
5. 配置选项
6. 贡献指南
7. 许可信息

基于当前项目结构和现有代码。
```

**API 文档**
```yaml
---
description: 生成 OpenAPI/Swagger 文档
---

为该文件中的 API 端点创建 OpenAPI 3.0 文档：
- 包括所有 HTTP 方法
- 记录请求/响应模式
- 添加示例请求和响应
- 包括身份验证要求
- 记录错误响应
- 添加描述性摘要
```

**测试**

**测试生成器**
```yaml
---
description: 生成全面的测试套件
---

为所选代码创建测试：
1. 所有公共方法的单元测试
2. 边缘情况测试
3. 错误处理测试
4. 模拟外部依赖
5. 性能基准测试
6. 适用的集成测试

使用我们项目的测试框架和约定。
```

**测试覆盖率分析器**
```yaml
---
description: 识别缺失的测试覆盖率
---

分析当前测试覆盖率并：
- 识别未测试的代码路径
- 建议其他测试用例
- 查找未覆盖的边缘情况
- 推荐集成测试
- 检查适当的错误测试
```

---

## 最佳实践

**命令命名：**
- 使用描述性、面向操作的名称
- 保持名称简洁但清晰
- 使用破折号分隔多词命令
- 避免使用通用名称如 `help` 或 `test`
- 注意：名称会自动进行 slugify 处理（小写，删除特殊字符）
- `.md` 扩展名会根据需要自动添加/删除

**命令内容：**
- 以明确的指令开始
- 使用结构化格式（列表、章节）
- 包括具体要求
- 引用项目约定
- 保持命令专注于单一任务

**组织：**
- 在子目录中分组相关命令
- 使用一致的命名模式
- 记录复杂命令
- 对命令进行版本控制
- 在项目存储库中共享团队命令

---

## 故障排除

**命令未显示：**
- **检查文件位置**：确保自定义命令文件位于 `.roo/commands/` 或 `~/.roo/commands/`
- **验证文件扩展名**：自定义命令必须是 `.md` 文件

**命令未找到：**
当斜杠命令未找到时，LLM 将看到：
```
Command 'command-name' not found. Available commands can be found in .roo/commands/ or ~/.roo/commands/
```

**命令冲突：**
- 自定义项目命令会覆盖同名的全局自定义命令
- 使用唯一名称以避免冲突
- 通过 UI 创建重复名称时，会附加数字（例如，`new-command-1`，`new-command-2`）

:::info 关于模式命令
斜杠菜单包括模式切换命令（如 `/code`，`/ask`），这些命令从根本上改变了 AI 的操作模式 - 它们不只是注入文本，而是切换整个 AI 上下文。您创建的自定义模式也会显示为斜杠命令（例如，slug 为 `reviewer` 的模式变为 `/reviewer`）。这些模式命令不能被自定义工作流程命令覆盖。在 [使用模式](/basic-usage/using-modes) 和 [自定义模式](/features/custom-modes) 中了解更多信息。
:::

---

## 另请参阅

- [使用模式](/basic-usage/using-modes) - 了解 Roo Code 的不同操作模式
- [自定义指令](/features/custom-instructions) - 为 Roo Code 设置持久指令
- [键盘快捷键](/features/keyboard-shortcuts) - 快速访问命令
- [任务管理](/features/task-todo-list) - 管理复杂工作流程