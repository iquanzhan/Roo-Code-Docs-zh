---
description: 了解模型上下文协议 (MCP) 和 REST API 之间的主要区别。理解为什么 MCP 是 AI 原生的，以及它如何实现有状态、有上下文的交互。
keywords:
  - MCP 与 API
  - 模型上下文协议
  - REST API 比较
  - AI 协议
  - 有状态连接
  - 工具发现
image: /img/social-share.jpg
sidebar_label: MCP 与 API
---

# MCP 与 REST API：根本区别

将 REST API 与模型上下文协议 (MCP) 进行比较是一个类别错误。它们在不同的抽象层上运行，并在 AI 系统中服务于根本不同的目的。

---

## 架构差异

| 特性 | MCP | REST API |
|---------|-----|-----------|
| 状态管理 | **有状态** - 在交互中保持上下文 | **无状态** - 每个请求都是独立的 |
| 连接类型 | 持久的、双向的连接 | 单向的请求/响应 |
| 通信方式 | 基于 JSON-RPC，具有持续的会话 | 基于 HTTP，具有离散的请求 |
| 上下文处理 | 上下文是协议的内在部分 | 必须手动管理上下文 |
| 工具发现 | 运行时发现可用工具 | 设计时集成，需要预先知识 |
| 集成方法 | 运行时集成，具有动态功能 | 设计时集成，需要代码更改 |

---

## 不同的层级，不同的目的

REST API 和 MCP 在技术栈中服务于不同的层级：

1. **REST**：低级 Web 通信模式，暴露资源上的操作
2. **MCP**：高级 AI 协议，编排工具使用并维护上下文

MCP 经常在内部使用 REST API，但将其抽象化以供 AI 使用。将 MCP 视为中间件，它将离散的 Web 服务转变为 AI 可以操作的统一环境。

---

## 上下文保留：AI 工作流的关键

MCP 的有状态设计解决了 REST 在 AI 应用中的一个关键限制：

- **REST 方法**：每个调用都是隔离的，需要在步骤之间手动传递上下文
- **MCP 方法**：一个对话上下文在多个工具使用中持续存在

例如，AI 在调试代码库时可以打开文件、运行测试并识别错误，而不会在步骤之间丢失上下文。MCP 会话维护对先前操作和结果的感知。

---

## 动态工具发现

MCP 使 AI 能够在运行时发现和使用工具：

```json
// AI 发现可用工具
{
  "tools": [
    {
      "name": "readFile",
      "description": "从文件中读取内容",
      "parameters": {
        "path": { "type": "string", "description": "文件路径" }
      }
    },
    {
      "name": "createTicket",
      "description": "在问题跟踪器中创建工单",
      "parameters": {
        "title": { "type": "string" },
        "description": { "type": "string" }
      }
    }
  ]
}
```

这种“即插即用”的功能允许在不重新部署或修改 AI 本身的情况下添加新工具。

---

## 现实世界示例：多工具工作流

考虑一个需要多个服务的任务：“检查最近的提交，为错误修复创建 JIRA 工单，并发布到 Slack。”

**基于 REST 的方法**：
- 需要为 Git、JIRA 和 Slack API 进行单独的集成
- 需要自定义代码来管理调用之间的上下文
- 如果任何服务更改其 API，则会中断

**基于 MCP 的方法**：
- 一个统一的协议用于所有工具
- 在整个工作流中维护上下文
- 可以在不更改代码的情况下交换新工具

---

## 为什么 Roo Code 使用 MCP

Roo Code 利用 MCP 提供：

1. **可扩展性**：添加无限的自定义工具，无需等待官方集成
2. **上下文感知**：工具可以访问对话历史和项目上下文
3. **简化的集成**：一种标准协议，而不是众多 API 模式
4. **运行时灵活性**：动态发现和使用新功能

MCP 在 Roo Code 和外部服务之间创建了一个通用连接器，REST API 通常在幕后为这些服务提供动力。

---

## 结论：互补而非竞争的技术

MCP 不会取代 REST API - 它建立在 REST API 之上。REST 在提供离散服务方面表现出色，而 MCP 在为 AI 代理编排这些服务方面表现出色。

关键区别在于 MCP 是 AI 原生的：它将模型视为一流用户，提供 AI 代理在复杂环境中有效运行所需的上下文、有状态交互层。