# 在 Roo Code 中使用 MCP

## 概述

Model Context Protocol (MCP) 是一种开放协议，允许工具向 AI 模型提供上下文。Roo Code 支持 MCP，使您可以集成各种工具和服务以增强 AI 交互。

## 目录

- [配置 MCP 服务器](#配置-mcp-服务器)
- [启用和禁用 MCP 服务器](#启用和禁用-mcp-服务器)
- [使用 Roo 创建 MCP 服务器](#使用-roo-创建-mcp-服务器)
- [管理 MCP 服务器](#管理-mcp-服务器)
- [查找和安装 MCP 服务器](#查找和安装-mcp-服务器)
- [MCP 工具工作流程](#mcp-工具工作流程)
- [故障排除](#故障排除)
- [平台特定配置](#平台特定配置)
- [运行时版本管理器](#运行时版本管理器)

## 配置 MCP 服务器

### 全局配置

您可以在全局配置文件中定义 MCP 服务器。此配置适用于所有项目。

**YAML 示例：**

```yaml
mcpServers:
  my-server:
    command: /path/to/server
    args:
      - --arg1
      - value1
    env:
      MY_ENV_VAR: my_value
```

### 项目级配置

您还可以在项目级配置文件中定义 MCP 服务器。此配置仅适用于特定项目。

**YAML 示例：**

```yaml
mcpServers:
  project-server:
    command: /path/to/project/server
    args:
      - --project-arg
      - project_value
```

## 启用和禁用 MCP 服务器

您可以通过在配置中添加 `disabled: true` 来禁用 MCP 服务器。

**YAML 示例：**

```yaml
mcpServers:
  disabled-server:
    command: /path/to/server
    disabled: true
```

要启用服务器，请删除 `disabled` 属性或将其设置为 `false`。

## 使用 Roo 创建 MCP 服务器

Roo Code 提供了创建 MCP 服务器的向导。您可以使用此向导快速设置新的 MCP 服务器。

1. 打开 Roo Code。
2. 导航到 MCP 服务器设置。
3. 点击“创建新服务器”。
4. 按照向导步骤配置服务器。

## 管理 MCP 服务器

### 删除服务器

要删除 MCP 服务器，请从配置文件中移除其定义。

### 重启服务器

要重启服务器，请在 Roo Code 中禁用然后重新启用它。

### 启用/禁用服务器

您可以通过编辑配置文件来启用或禁用服务器。

### 网络超时

您可以配置网络超时设置以控制服务器响应时间。

### 工具自动批准

您可以配置工具自动批准设置以自动批准某些工具请求。

## 查找和安装 MCP 服务器

您可以通过以下方式查找和安装 MCP 服务器：

1. 使用 Roo Code 的内置市场。
2. 从第三方来源手动安装。

## MCP 工具工作流程

MCP 工具工作流程包括以下步骤：

1. 工具初始化。
2. 上下文提供。
3. 工具执行。
4. 结果返回。

## 故障排除

如果遇到问题，请检查以下内容：

- 服务器配置是否正确。
- 服务器是否正在运行。
- 网络连接是否正常。

## 平台特定配置

### Windows

在 Windows 上，您可能需要配置特定的环境变量。

### macOS

在 macOS 上，您可能需要配置特定的路径。

### Linux

在 Linux 上，您可能需要配置特定的权限。

## 运行时版本管理器

### mise

您可以使用 mise 来管理 MCP 服务器的运行时版本。

### asdf

您可以使用 asdf 来管理 MCP 服务器的运行时版本。
