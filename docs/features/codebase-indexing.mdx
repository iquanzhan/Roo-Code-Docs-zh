---
description: 了解 Roo Code 的代码库索引功能如何通过语义搜索提高代码理解，包括索引创建、向量数据库配置和嵌入模型设置。
keywords:
  - 代码库索引
  - 语义搜索
  - 向量数据库
  - 嵌入模型
  - Qdrant
image: /img/social-share.jpg
---

# 代码库索引

代码库索引功能通过创建语义搜索索引来提高代码理解能力。此功能使用 AI 嵌入技术将代码转换为向量表示，然后存储在向量数据库中以实现快速检索。

## 快速开始

### 1. 配置 Qdrant 向量数据库

您可以选择使用 Qdrant Cloud 或本地 Docker 实例：

#### Qdrant Cloud (推荐)

1. 访问 [Qdrant Cloud](https://cloud.qdrant.io/) 并创建一个免费集群
2. 获取您的 API 密钥和集群 URL
3. 在 Roo Code 设置中配置 Qdrant 连接

#### 本地 Docker 实例

1. 安装 Docker
2. 运行以下命令启动 Qdrant：
   ```
   docker run -p 6333:6333 -p 6334:6334 qdrant/qdrant
   ```
3. 在 Roo Code 设置中配置本地 Qdrant 连接

### 2. 设置 Google Gemini 嵌入模型

1. 访问 [Google AI Studio](https://aistudio.google.com/) 获取免费 API 密钥
2. 在 Roo Code 设置中配置 Google Gemini 嵌入模型

### 3. 创建索引

1. 打开 Roo Code
2. 导航到代码库索引设置
3. 点击“创建索引”按钮
4. 等待索引创建完成

## 索引状态指示器

索引状态通过颜色指示器显示：

- **黄色**：索引正在创建中
- **绿色**：索引已准备好
- **红色**：索引创建失败

## 配置选项

您可以通过以下配置选项来调整代码库索引功能：

- **搜索分数阈值**：设置搜索结果的最低相关性分数
- **最大搜索结果数**：设置每次搜索返回的最大结果数
- **索引更新间隔**：设置索引自动更新的时间间隔

## 高级设置

### 自定义嵌入模型

您可以通过以下步骤配置自定义嵌入模型：

1. 在 Roo Code 设置中选择“自定义嵌入模型”
2. 输入模型的 API 端点和认证信息
3. 配置模型参数

### 索引过滤

您可以通过以下方式过滤索引内容：

- **文件类型过滤**：只索引特定类型的文件
- **目录过滤**：只索引特定目录中的文件
- **大小过滤**：只索引小于指定大小的文件